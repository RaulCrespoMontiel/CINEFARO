{% extends "base.html" %}
{% load static %}

{% block title %}Filtro por Categoría{% endblock title %}

{% block content %}
    <h1 style="color: #ffcc00; text-align: left; margin-bottom: 30px;">{{ filtro_activo }}</h1>
    
    <div style="display: flex; justify-content: space-around; width: 100%; flex-wrap: wrap;">
        
        {# SECCIÓN DE OBRAS INDEPENDIENTES #}
        <div style="flex: 1; min-width: 45%; margin-right: 20px; background-color: #1a1a1a; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            <h2 style="color: #E50914; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px;">
                Obras Independientes ({{ obras_independientes|length }})
            </h2>
            {% if obras_independientes %}
                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                    {% for obra in obras_independientes %}
                        <div style="width: 150px; text-align: center;">
                            <a href="{% url 'app_creadores:detalle_obra' obra_id=obra.pk %}" style="text-decoration: none; color: inherit;">
                                <img src="{{ obra.imagen_portada.url }}" alt="{{ obra.titulo }}" 
                                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px; margin-bottom: 10px;">
                                <p style="color: #fff; font-weight: bold; margin: 0;">{{ obra.titulo }}</p>
                                <p style="color: #aaa; font-size: 0.9em; margin: 0;">{{ obra.nombre_autor }}</p>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="color: #ccc;">No se encontraron obras independientes en este género.</p>
            {% endif %}
        </div>

        {# SECCIÓN DE PELÍCULAS HUÉRFANAS #}
        <div style="flex: 1; min-width: 45%; background-color: #1a1a1a; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
            <h2 style="color: #00BFFF; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px;">
                Archivos de Conservación ({{ peliculas_huerfanas|length }})
            </h2>
            {% if peliculas_huerfanas %}
                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                    {% for pelicula in peliculas_huerfanas %}
                        <div style="width: 150px; text-align: center;">
                            <a href="{% url 'app_conservacion:detalle_huerfana' pk=pelicula.pk %}" style="text-decoration: none; color: inherit;">
                                <img src="{{ pelicula.imagen_portada.url }}" alt="{{ pelicula.titulo }}" 
                                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px; margin-bottom: 10px;">
                                <p style="color: #fff; font-weight: bold; margin: 0;">{{ pelicula.titulo }}</p>
                                <p style="color: #aaa; font-size: 0.9em; margin: 0;">{{ pelicula.nombre_autor|default:"Desconocido" }}</p>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="color: #ccc;">No se encontraron películas huérfanas en este género.</p>
            {% endif %}
        </div>

    </div>
{% endblock content %}